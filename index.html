<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تطبيق الوقت الإسلامي</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700&family=Outfit:wght@300;400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Chart.js for Sleep Graphs -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="app-container">
        <!-- Background Pattern -->
        <div class="islamic-pattern"></div>

        <!-- Global Decoration -->
        <div class="clock-decoration"></div>

        <!-- Header -->
        <header class="app-header">
            <button id="dev-mode-btn" class="dev-btn"><i class="fas fa-code"></i></button>
            <h1>الوقت</h1>
        </header>

        <!-- Main Content Area -->
        <main class="content-area">
            <!-- Clock Section -->
            <section id="clock-section" class="active-section">
                <div class="clock-display">
                    <div class="time-wrapper">
                        <span id="hours">00</span>:<span id="minutes">00</span>
                    </div>
                    <div class="seconds-wrapper">
                        <span id="seconds">00</span> <span id="ampm">ص</span>
                    </div>
                    <div class="date-wrapper">
                        <div class="date-pill">
                            <i class="fas fa-moon"></i>
                            <span id="hijri-date">...</span>
                        </div>
                        <div class="date-pill">
                            <i class="fas fa-calendar-alt"></i>
                            <span id="gregorian-date">...</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Alarm Section -->
            <section id="alarm-section">
                <div class="section-title">المنبه</div>
                <div class="alarm-list" id="alarm-list">
                    <!-- Alarms will be added here -->
                    <div class="empty-state">لا توجد منبهات</div>
                </div>
                <button class="fab-btn" id="add-alarm-btn"><i class="fas fa-plus"></i></button>
            </section>

            <!-- Timer Section -->
            <section id="timer-section">
                <div class="section-title">المؤقت</div>
                <div class="timer-display">
                    <div class="timer-inputs">
                        <input type="number" id="timer-hours" placeholder="00" min="0" max="99">
                        <span>:</span>
                        <input type="number" id="timer-minutes" placeholder="00" min="0" max="59">
                        <span>:</span>
                        <input type="number" id="timer-seconds" placeholder="00" min="0" max="59">
                    </div>
                    <div class="timer-countdown hidden" id="timer-countdown">
                        00:00:00
                    </div>
                </div>
                <div class="controls">
                    <button class="control-btn start" id="timer-start"><i class="fas fa-play"></i></button>
                    <button class="control-btn pause hidden" id="timer-pause"><i class="fas fa-pause"></i></button>
                    <button class="control-btn reset" id="timer-reset"><i class="fas fa-undo"></i></button>
                </div>
            </section>

            <!-- Sleep Tracking Section -->
            <section id="sleep-section">
                <div class="section-title">مراقب النوم</div>

                <div class="sleep-dashboard">
                    <!-- Status Card -->
                    <div class="status-card" id="status-card">
                        <div class="status-icon"><i class="fas fa-eye"></i></div>
                        <div class="status-text">
                            <span class="status-label">الحالة الحالية</span>
                            <span id="current-state">مستيقظ</span>
                        </div>
                    </div>

                    <!-- Timers Grid -->
                    <div class="timers-grid">
                        <div class="timer-card primary">
                            <span class="timer-label">مدة النوم الفعلي</span>
                            <div class="timer-value" id="sleep-duration">00:00:00</div>
                        </div>
                        <div class="timer-card secondary">
                            <span class="timer-label">مدة التتبع</span>
                            <div class="timer-value" id="total-tracking-time">00:00:00</div>
                        </div>
                    </div>

                    <!-- Graph Container -->
                    <div class="sleep-chart-container hidden" id="chart-container">
                        <canvas id="sleepChart"></canvas>
                    </div>

                    <div class="manual-controls hidden" id="manual-controls">
                        <button class="manual-btn" id="manual-wake-btn">
                            <i class="fas fa-sun"></i>
                            <span>انا مستيقظ (يدوي)</span>
                        </button>
                    </div>
                </div>

                <div class="controls main-controls">
                    <button class="control-btn start" id="sleep-start-btn">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button class="control-btn pause hidden" id="sleep-stop-btn">
                        <i class="fas fa-stop"></i>
                    </button>
                </div>
            </section>

            <!-- Stopwatch Section --> <!-- Keeping original order -->
            <section id="stopwatch-section">
                <div class="section-title">ساعة الإيقاف</div>
                <div class="stopwatch-display" id="stopwatch-display">
                    00:00.00
                </div>
                <div class="controls">
                    <button class="control-btn start" id="stopwatch-start"><i class="fas fa-play"></i></button>
                    <button class="control-btn pause hidden" id="stopwatch-pause"><i class="fas fa-pause"></i></button>
                    <button class="control-btn reset" id="stopwatch-reset"><i class="fas fa-undo"></i></button>
                    <button class="control-btn lap" id="stopwatch-lap"><i class="fas fa-flag"></i></button>
                </div>
                <div class="laps-list" id="laps-list"></div>
            </section>
        </main>

        <!-- Navigation Bar -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-target="clock-section">
                <i class="fas fa-clock"></i>
                <span>الساعة</span>
            </button>
            <button class="nav-item" data-target="alarm-section">
                <i class="fas fa-bell"></i>
                <span>المنبه</span>
            </button>
            <button class="nav-item" data-target="sleep-section">
                <i class="fas fa-bed"></i>
                <span>النوم</span>
            </button>
            <button class="nav-item" data-target="timer-section">
                <i class="fas fa-hourglass-half"></i>
                <span>المؤقت</span>
            </button>
            <button class="nav-item" data-target="stopwatch-section">
                <i class="fas fa-stopwatch"></i>
                <span>الإيقاف</span>
            </button>
        </nav>
    </div>

    <!-- Alarm Modal -->
    <div id="alarm-modal" class="modal hidden">
        <div class="modal-content">
            <h3>اضافة منبه جديد</h3>
            <div class="time-picker">
                <input type="time" id="alarm-time-input">
            </div>
            <div class="modal-actions">
                <button id="cancel-alarm" class="modal-btn cancel">إلغاء</button>
                <button id="save-alarm" class="modal-btn save">حفظ</button>
            </div>
        </div>
    </div>

    <!-- Alarm Ringing Overlay -->
    <!-- Sensor Test Modal -->
    <div id="sensor-modal" class="modal hidden">
        <div class="modal-content sensor-content">
            <h3>اختبار الحساسات</h3>
            <button id="enable-sensors-btn" class="modal-btn save"
                style="width:100%; margin-bottom:15px; background:var(--primary-light)">تفعيل الحساسات (اضغط
                هنا)</button>
            <div class="sensor-readout">
                <div class="axis-row">
                    <span>Motion X:</span> <span id="acc-x" class="mono">0.00</span>
                </div>
                <div class="axis-row">
                    <span>Motion Y:</span> <span id="acc-y" class="mono">0.00</span>
                </div>
                <div class="axis-row">
                    <span>Motion Z:</span> <span id="acc-z" class="mono">0.00</span>
                </div>
                <div class="axis-row highlight">
                    <span>الحركة:</span> <span id="acc-total" class="mono">0.00</span>
                </div>
                <hr style="border-color:var(--glass-border); margin:10px 0;">
                <div class="axis-row">
                    <span>Alpha (Tilt):</span> <span id="orient-alpha" class="mono">0</span>
                </div>
                <div class="axis-row">
                    <span>Beta (Tilt):</span> <span id="orient-beta" class="mono">0</span>
                </div>
                <div class="axis-row">
                    <span>Gamma (Tilt):</span> <span id="orient-gamma" class="mono">0</span>
                </div>
            </div>
            <div class="sensor-graph-bar">
                <div id="sensor-bar-fill" style="width: 0%"></div>
            </div>
            <p id="sensor-status" style="font-size:0.8rem; color:#ef5350;">ملاحظة: يتطلب HTTPS أو localhost</p>
            <button id="close-sensor-modal" class="modal-btn cancel" style="width:100%; margin-top:15px">إغلاق</button>
        </div>
    </div>

    <div id="alarm-ringing" class="ringing-overlay hidden">
        <div class="ringing-content">
            <i class="fas fa-bell fa-shake"></i>
            <h2>وقت التنبيه!</h2>
            <button id="stop-alarm" class="stop-alarm-btn">إيقاف</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>
